<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <link rel="icon" href="assets/Adain Transparent Official Icon White 5.png">
    <title>Adain Affliate</title>
    <link rel="stylesheet" href="/css/dashboard2.css">    
</head>
<body>

    <div class="left-side">

        <div class="clossee">
            <p class="dontsho">X</p>
        </div>
        
        <div class="back">
            <img src="/images/arrow-next-svgrepo-com black.png" alt="" id="backimg">
            <p id="toback">Back to home</p>
        </div>

        <div class="side-nav">
            <ul>
                <a href="http://localhost:3500/api/auth/dashboard/<%= user.id %>"><li class="remain" id="plan"><img src="/images/plan-svgrepo-com.png" alt="">Plan</li></a>
                <a href="http://localhost:3500/api/auth/users/withdraw/<%= user.id %>"><li id="withdraw"><img src="/images/money-bill-transfer-solid.svg" alt="">Withdrawals</li></a>
                <a href="http://localhost:3500/api/auth/users/wallet/<%= user.id %>"><li id="wallet"><img src="/images/wallet-svgrepo-com (1).png" alt="">Wallet</li></a>
                <a href="http://localhost:3500/api/auth/users/vtu/<%= user.id %>"><li id="Top-up"><img src="/images/top-up-balance-svgrepo-com.png" alt="">VTU Top-up</li></a>
                <a href="http://localhost:3500/api/auth/users/<%= user.id %>/referred""><li id="Top-up"><img src="/images/person.png" alt="">Referred</li></a>

            </ul>
        </div>
        <div class="logout">
            <img src="/images/session-leave-svgrepo-com.png" alt="">
            <p>Logout</p>
        </div>
    </div>

    <div class="side-bar">

        <div class="ham">
            <img src="/images/hamburger-svgrepo-com (1).png" id="hamm" alt="">
        </div>

        <div class="dark">
            <svg id="moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path fill="#000000" d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"/></svg>
            <img src="/images/sun-2-svgrepo-com.png" alt="" id="sun">
        </div>
        <svg id="bell" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 25.4c0 45.4-15.5 89.5-43.8 124.9L5.3 377c-5.8 7.2-6.9 17.1-2.9 25.4S14.8 416 24 416l400 0c9.2 0 17.6-5.3 21.6-13.6s2.9-18.2-2.9-25.4l-14.9-18.6C399.5 322.9 384 278.8 384 233.4l0-25.4c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm0 96c61.9 0 112 50.1 112 112l0 25.4c0 47.9 13.9 94.6 39.7 134.6L72.3 368C98.1 328 112 281.3 112 233.4l0-25.4c0-61.9 50.1-112 112-112zm64 352l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7s18.7-28.3 18.7-45.3z"/></svg>

        <div class="noti">
            <p id="noti-num">1</p>
        </div>

        <div class="sear">
            <input type="text" name="" id="searchbar">
            <img src="/images/search-svgrepo-com.png" alt="" id="search">
        </div>

        <div class="profile">
            <img src="<%= user.image %>" class="img"></img>
            <div class="go">
            <img src="/images/arrow-next-svgrepo-com black.png" alt="" id="around">
        </div>
        </div>
    </div>
    

    <div class="tootop">

        <ul>
            <li id="profile"><a href="http://localhost:3500/api/auth/users/profile/<%= user.id %>"><img src="/images/profile-1335-svgrepo-com.png" alt=""> Profile</a></li>
            <li id="logout"><a href=""><img src="/images/power-symbol-svgrepo-com.png" alt=""> Logout</a></li>
        </ul>
    
    </div>

    <div class="noti-down">
        <p id="noti-head">Notification</p>
    
        <div class="noti-all">
            <% if (notifications.length === 0) { %>
                <p>No notifications</p>
            <% } else { %>
                <% notifications.forEach(notification => { %>
                    <a href="">
                        <div class="noti-info">
                            <p id="noti-about">
                                <span id="noti-name"><%= notification.message %></span>
                            </p>
                            <p id="noti-time"><%= notification.createdAt.toDateString() %></p>
                            <div class="noti-active"></div>
                        </div>
                    </a>
                <% }) %>
            <% } %>
        </div>
        <a href=""><p id="noti-bottom">See all recent activity</p></a>

    </div>

    
    <div class="oveelayy"></div>
    <div class="sure">
        <img src="/images/session-leave-svgrepo-com.png" alt="">
        <p>Are you sure you want <span> to log out? </span></p>

        <div class="buts">
            <button><a href="http://localhost:3500/logout">Logout</a></button>
            <button class="cancel">Cancel</button>
        </div>
    </div>
    

   






    


    <div class="wallet">


        <div class="six-divs">
            <div class="one">
                <p id="headd">Grand Total</p>
                <p id="body">PV Wallet</p>

                <p id="degitt">0</p>

            </div>
            <div class="two">
                <p id="headd">Grand Total</p>
                <p id="body">Earning Wallet</p>

                <p id="degitt">₦<%=  user.commissions %></p>

            </div>
            <div class="three">
                <p id="headd">Total Monthly Earing</p>
                <p id="body">Wallet</p>
                <p>
                    <% 
                    let totalPoints = 0; // Initialize total points
                    user.points.forEach(point => {
                        totalPoints += point.points; // Accumulate total points
                        %>
                            
                        <% }) %>
                </p>

                <p id="degitt2"><%= totalPoints %>%</p>

            </div>
            <div class="four">
                <p id="headd">Monthly Fees</p>
                <p id="body">PV Wallet</p>

                <p id="degitt">0</p>

            </div>
            <div class="five">
                <p id="headd">Monthly Leadership</p>
                <p id="body">Bonus Wallet</p>

                <p id="degitt">0</p>

            </div>
            <div class="six">
                <p id="headd">Wallet Balance</p>
                <p id="body">Total Value</p>

                <p id="degitt">₦0</p>

                <section class="buttt">
                <button id="fund">Fund</button>
                </section>

            </div>
        </div>

        <div class="twwo-divs">
            <div class="aone">
                <p id="headd">Total Mpnthly PV</p>
                <p id="body">Wallet</p>

                <p id="degitt2"><%= Math.floor(totalPoints + totalsub) %></p>

            </div>
            <div class="atwo">
                <p id="headd">Get Token</p>
                <p id="body2"><%= user.referralToken %>

                </p>


                <div name="" id="copy"><img src="/images/copy-light.svg" alt=""></div>
                <a target="" id="copied">copied</a>
                <section class="buttt">
                    <form action="http://localhost:3500/api/auth/getreferraltoken" method="post">
                        <input type="text" value="<%= user.id %>" name="userId" id="userId" hidden>
                        <button type="submit" id="get" class="btn btn-primary m-4">Get</button>
                    </form>
                    </section>

            </div>
        </div>
    </div>



    <div class="over"></div>
    <div class="am">

        <p id="hd">Withdraw</p>
        <h6 id="cloose">X</h6>

      

        <form action="http://localhost:3500/api/payment/banktransfer" method="post">
        
        <input type="text" value="<%= user.id  %>" name="userId" id="userId" hidden>
        <label for="Amount">FullName</label><br>
        <input
        type="text"
        id="name"
        name="name"
        value="<%= user.fullname %>"
        placeholder="xxxx@xxx.xx" />

        <label for="Amount">Email</label><br>
        <input type="email" name="email"  placeholder="Enter Amount" id="email" value="<%= user.email %>" >
        <label for="Amount">Amount</label><br>
        <input type="number" name="amount"  placeholder="Enter Amount" id="amount">
        <h6 id="ask">input an amount first, shouldn't be less than 3 digit</h6>
        <br>
       
        <div class="buut">
            <button id="btn" type="submit">Procced</button>
        </div>
        </form>

        
    </div>
    


      
    </div>
    


    <script>

        document.getElementById("copy").addEventListener("click", function() {
            // Get the text from #body2
            const textToCopy = document.getElementById("body2").innerText;
        
            // Create a temporary textarea element to copy the text
            const tempTextArea = document.createElement("textarea");
            tempTextArea.value = textToCopy;
            document.body.appendChild(tempTextArea);
        
            // Select the text in the textarea
            tempTextArea.select();
            tempTextArea.setSelectionRange(0, 99999); // For mobile devices
        
            // Copy the text to the clipboard
            document.execCommand("copy");
        
            // Remove the temporary textarea
            document.body.removeChild(tempTextArea);
        
            // Show the "copied" message
            const copiedMessage = document.getElementById("copied");
            copiedMessage.style.display = "inline"; // Or use "block" depending on your styling
        
            // Hide the "copied" message after 3 seconds
            setTimeout(function() {
                copiedMessage.style.display = "none";
            }, 3000);
        });
        
                
        
        document.querySelector("#fund").addEventListener("click", function(){
            // window.alert("ll")
            document.querySelector(".am").classList.add("active")
            document.querySelector(".over").classList.add("active")
            document.querySelector("body").classList.add("active")
        })
        
        
        document.getElementById("cloose").addEventListener("click", function(){
            
            // window.alert("kkk")
                document.querySelector(".over").classList.remove("active")
                document.querySelector(".am").classList.remove("active")
                document.querySelector("body").classList.remove("active")
            
        
        })
        
        
        
        
        
        
           document.querySelector("#btn").addEventListener("click", function(){
            // window.alert("insuficent Fund")
            let val = document.getElementById("Amm").value;
            // console.log(val)
            // const num = Math.max(0,  Math.min(val, 999))
            if (val <= 50) {
                // window.alert("input amout first")
                document.querySelector("#Amm").classList.add("active")
                document.querySelector("#ask").classList.add("active")
                document.querySelector("#btn").classList.add("active")
            }
            else{
                document.querySelector(".over").classList.remove("active")
                document.querySelector(".am").classList.remove("active")
            }
        
            })
        
            document.getElementById("Amm").addEventListener("click", function(){
                document.querySelector("#Amm").classList.remove("active")
                document.querySelector("#ask").classList.remove("active")
                document.querySelector("#btn").classList.remove("active")
                document.querySelector("body").classList.remove("active")
            })
        
        
            
        
        
        
        
        
        
                // Function to apply dark mode classes
            function applyDarkMode() {
                document.getElementById("moon").classList.add("active");
                document.getElementById("sun").classList.add("active");
                document.querySelector("body").classList.add("highlight");
                document.querySelector(".side-bar").classList.add("highlight");
                document.querySelector(".tootop").classList.add("highlight");
                document.querySelector(".nav").classList.add("highlight");
                document.querySelector(".nav2").classList.add("highlight");
                document.querySelector("input").classList.add("highlight");
                document.querySelector("#searchbar").classList.add("highlight");
                document.querySelector("#search").classList.add("highlight");
            }
            
            // Function to remove dark mode classes
            function removeDarkMode() {
                document.getElementById("moon").classList.remove("active");
                document.getElementById("sun").classList.remove("active");
                document.querySelector("body").classList.remove("highlight");
                document.querySelector(".side-bar").classList.remove("highlight");
                document.querySelector(".tootop").classList.remove("highlight");
                document.querySelector(".nav").classList.remove("highlight");
                document.querySelector(".nav2").classList.remove("highlight");
                document.querySelector("input").classList.remove("highlight");
                document.querySelector("#searchbar").classList.remove("highlight");
                document.querySelector("#search").classList.remove("highlight");
            }
            
            // Check localStorage on page load to set the initial mode
            // if (localStorage.getItem("darkMode") === "enabled") {
            //     applyDarkMode();
            // }
            
            // Event listener for enabling dark mode
            document.getElementById("moon").addEventListener("click", function() {
                localStorage.setItem("darkMode", "enabled");
                applyDarkMode();
            });
            
            // Event listener for disabling dark mode
            document.getElementById("sun").addEventListener("click", function() {
                localStorage.setItem("darkMode", "disabled");
                removeDarkMode();
            });
            </script>
            <script src="/js/dash.js"></script>
</body>
</html>